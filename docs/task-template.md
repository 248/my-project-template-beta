# タスク実装テンプレート

## Definition of Ready (DoR) - 着手前チェックリスト

各タスクを開始する前に、以下の項目を確認してください：

### 仕様リンク

- [ ] 関連する要件文書のセクションを確認済み
- [ ] 設計文書の該当箇所を確認済み
- [ ] OpenAPI契約（該当する場合）を確認済み

### 受入観点

- [ ] 受け入れ基準が明確に定義されている
- [ ] テストケースの観点が整理されている
- [ ] エラーハンドリングの要件が明確

### ENV準備

- [ ] 必要な環境変数が特定されている
- [ ] ローカル開発環境の設定が完了している
- [ ] 外部依存（Supabase等）の接続確認済み

## Definition of Done (DoD) - 完了基準チェックリスト

各タスクを完了する前に、以下の項目を確認してください：

### テスト

- [ ] 単体テストが実装され、パスしている
- [ ] 統合テスト（該当する場合）が実装され、パスしている
- [ ] エラーケースのテストが含まれている
- [ ] テストカバレッジが適切（80%以上推奨）

### Lint

- [ ] ESLintエラーがない
- [ ] Prettierによるフォーマットが適用されている
- [ ] TypeScriptの型エラーがない
- [ ] import文の整理が完了している

### CI緑

- [ ] GitHub Actionsのビルドがパスしている
- [ ] 全てのテストがCIでパスしている
- [ ] 依存方向リンターでエラーがない（該当する場合）
- [ ] OpenAPI契約チェックがパスしている（該当する場合）

### ドキュメント更新

- [ ] README.mdが更新されている（該当する場合）
- [ ] APIドキュメントが更新されている（該当する場合）
- [ ] コード内のコメントが適切に記述されている

### traceId確認

- [ ] ログ出力にtraceIdが含まれている（該当する場合）
- [ ] エラーレスポンスにtraceIdが含まれている（該当する場合）
- [ ] 分散トレーシングが適切に実装されている（該当する場合）

## 実装時の注意事項

### 層分離の遵守

- [ ] UI層（apps/web）からCore層を直接呼び出していない
- [ ] Core層からNext.jsやfetch等をimportしていない
- [ ] Route Handlers内にビジネスロジックを記述していない

### エラーハンドリング

- [ ] 適切なエラー型を使用している
- [ ] ログ出力が構造化されている
- [ ] PIIやシークレットがredactされている

### パフォーマンス

- [ ] 不要な処理が含まれていない
- [ ] 適切なタイムアウト設定がされている
- [ ] リトライ機構が実装されている（該当する場合）

## 完了報告

タスク完了時は、以下の情報を含めて報告してください：

1. 実装した機能の概要
2. 変更されたファイルの一覧
3. テスト結果の概要
4. 既知の制限事項や今後の改善点
5. 次のタスクへの引き継ぎ事項（該当する場合）
